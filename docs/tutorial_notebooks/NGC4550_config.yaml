# Example yaml configuration file for the legacy implementation
# All relevant input is in one file with two sections: SYSTEM and SETTINGS

# Start of yaml document
---
###############################################################################
# SECTION 1 : SYSTEM
# Define the physical system (e.g. the galaxy or globular cluster being )
###############################################################################

system_attributes:
    distMPc: 15.5
    name: "NGC4550"
    position_angle: 0.0

system_components:

    bh:
        parameters:
            m:
                fixed: True
                value: 6.0
                logarithmic: True
                LaTeX: "$M_{BH}$"
            a:
                fixed: True
                value: 1.e-3
                LaTeX: "$a_{BH}$"
        type: "Plummer"
        include: True
        contributes_to_potential: True

    dh:
        parameters:
            c: # NFW halo concentration
                fixed: True
                value: 10.0
                LaTeX: "$c_{NFW}$"
            f: # dark matter fraction M200/M*
                fixed: False
                value: 0.0
                LaTeX: "$log(M_{200}/M_{star})$"
                logarithmic: True
                par_generator_settings:
                    lo: -1.
                    hi: 1.
                    step: 0.5
                    minstep: 0.01
        type: NFW
        include: True
        contributes_to_potential: True

    stars:
        parameters:
            q: # intrinsic flattening (C/A)
                fixed: True
                value: 0.1
                LaTeX: "$q_{min}$"
            p: # intrinsic B/A
                fixed: True
                value: 0.99
                LaTeX: "$p_{min}$"
            u: # sigma_obs / sigma_intrinsic
                fixed: True
                value: 0.9999
                LaTeX: "$u_{min}$"
        type: "TriaxialVisibleComponent"
        mge_pot: "mge.ecsv"
        mge_lum: "mge.ecsv"
        include: True
        contributes_to_potential: True
        kinematics:
            sauron:
                weight: 1.0
                type: BayesLOSVD
                datafile: "bayes_losvd_kins.ecsv"
                aperturefile: "aperture.dat"
                binfile: "bins.dat"

system_parameters: # physical system standalone parameters
    ml: # M/L
        fixed: False
        value: 2.5
        par_generator_settings:
            lo: 0.5
            hi: 7.0
            step: 1.0
            minstep: 0.1
        LaTeX: "$Y_{r}$"

###############################################################################
# SECTION 2: SETTINGS
# Define other settings e.g. for the orbit library and weight solver
###############################################################################

orblib_settings: # don't put in physical system -> config object
    nE: 6
    logrmin: -0.101275
    logrmax: 1.99123
    nI2: 5            # must be >= 4
    nI3: 5
    dithering: 1
    #the following values should usually not be changed
    orbital_periods: 200
    sampling: 50000
    starting_orbit: 1
    number_orbits: -1 #-1 --> all orbits
    accuracy: '1.0d-5'
    random_seed: 4242

weight_solver_settings:
    type: "NNLS"
    lum_intr_rel_err: 0.01
    sb_proj_rel_err: 0.02
    nnls_solver: 'scipy'

parameter_space_settings:
    generator_type: "LegacyGridSearch"
    which_chi2: "kinchi2"
    generator_settings:
        threshold_del_chi2_as_frac_of_sqrt2nobs: 0.05
    stopping_criteria:
        min_delta_chi2_rel : 0.1
        n_max_mods : 50
        n_max_iter : 10

multiprocessing_settings:
  ncpus: 4

legacy_settings:
    directory: "default"

io_settings: # paths can be given with or without trailing slash
    input_directory: "NGC4550_input/dynamite_input/"
    output_directory: "NGC4550_output/"
    all_models_file: "all_models.ecsv"
